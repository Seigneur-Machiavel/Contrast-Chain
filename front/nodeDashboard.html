<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contrast Node Dashboard</title>
    <script crossorigin src="https://unpkg.com/@msgpack/msgpack"></script>
    <script src="../externalLibs/anime.min.js"></script>
    <script src="./front/nodeDashboardScript.mjs" type="module"></script>
    <link rel="stylesheet" href="./front/nodeDashboard.css">

</head>

<body>
    <div id="topBar">
        <h3>Node Dashboard v1.0</h3>
        
        <div class="adminPanelContainer">
            <div class="btnWrap hidden">
                <h3>roles: <span id="roles"></span></h3>
                <div>
                    
                    <button id="forceRestart">Restart</button>
                    <button id="Revalidate">Revalidate</button>
                    <button id="resetInfo">Reset Wallet Data</button>
                    <button id="eraseChainData">Erase Chain Data</button>
                    <button id="hardReset">Hard Reset</button>
                    <button id="updateGit">Update (Git)</button>
                </div>
            </div>
            <button id="toggleAdminPanel" class="toggleAdminPanelButton">Show Admin Panel</button>
        </div>
    </div> 
    

    <div id="dashboard">
        <div class="dashboard-inner">
            <!-- Validator Container -->
            <div class="container validator">
                <div class="spacedText">
                    <h1>Validator</h1>
                    <h3 class="heightText">Height: <span id="validatorHeight">0</span></h3>
                </div>
                <div class="spacedText">
                    <h3>Address:</h3>
                    <h3 id="validatorAddress"></h3>
                </div>
                <div class="spacedText">
                    <h3>Reward address:</h3>
                    <div style="display: flex; position: relative; align-items: center;">
                        <h3 id="validatorRewardAddress"></h3>
                        <div id="validatorAddressEditBtn" class="editButton">✎</div>
                    </div>
                </div>
                <div class="spacedText">
                    <h3>Balance:</h3>
                    <h3 id="validatorBalance">0.000000</h3>
                </div>
                <div class="spacedText">
                    <h3>Staked:</h3>
                    <h3 id="staked">0.000000</h3>
                </div>
                <div class="spacedText">
                    <h3>Staking:</h3>
                    <div id="stakeInputWrap"style="transform: translateY(26%);">
                        <input type="text" class ="amountInput" value="1.000000" min="0">
                        <button>Send Tx</button>
                    </div>
                </div>
            </div>
    
            <!-- Miner Container -->
            <div class="container miner">
                <div class="spacedText">
                    <h1>Miner</h1>
                    <h3 class="heightText">Height: <span id="minerHeight">0</span></h3>
                </div>
                <div class="spacedText">
                    <h3>Address:</h3>
                    <div style="display: flex; position: relative; align-items: center;">
                        <h3 id="minerAddress"></h3>
                        <div id="minerAddressEditBtn" class="editButton">✎</div>
                    </div>
                </div>
                <div class="spacedText">
                    <h3>Balance:</h3>
                    <h3 id="minerBalance">0.000000</h3>
                </div>
                <div class="spacedText">
                    <h3>HashRate:</h3>
                    <h3><span id="hashRate" value="0"></span> H/s</h3>
                </div>
                <div class="spacedText">
                    <h3>Threads:</h3>
                    <div id="minerThreadsIncrementalInput" class="incrementalInput">
                        <button>-</button>
                        <input type="number" value="1" min="1" max="16">
                        <button>+</button>
                    </div>
                </div>
            </div>
        </div>
    
        <!-- Global Information Container -->
        <div class="container global-info">
            <div class="spacedText">
                <h1>Node Information</h1>
            </div>

            <div class="spacedText">
                <h3>Client Version</h3>
                <h3 id="clientVersion">v0.1</h3> 
            </div>

            <div class="spacedText">
                <h3>Node State</h3>
                <h3 id="nodeState">Sync/Idle/Digest</h3>
            </div>

            <div class="spacedText">
                <h3>Last Block Info:</h3>
                <h3 id="lastBlockInfo">N/A</h3>
            </div>
            
            <div class="spacedText">
                <h3>Tx in Mempool:</h3>
                <h3 id="txInMempool">0</h3>
            </div>
            
            <div class="spacedText">
                <h3>Average Block Time:</h3>
                <h3 id="averageBlockTime">0 seconds</h3>
            </div>
            <!-- New Network Section -->
            <div class="spacedText">
                <h1>Network</h1>
            </div>
            
            <div class="spacedText">
                <h3>Peer ID:</h3>
                <h3 id="peerId">N/A</h3>
            </div>

            <div class="spacedText">
                <h3>Peers Connected:</h3>
                <h3 id="peersConnected">0</h3>
            </div>
            
            <div class="spacedText">
                <h3>Connected Peers:</h3>
                <ul id="peersConnectedList" class="network-list">
                    <!-- Connected Peer IDs will be dynamically inserted here -->
                </ul>
            </div>
            </div>

    </div>
    
    <div class="modalsWrap hidden fold">
        <div class="modalsWrapBackground"></div>
        <div class="modalWrap hidden" id="setupModalWrap">
            <div class="modal">
                
                <form id="setupPrivateKeyForm">
                    <div class="spacedText">
                        <h3>Private key:</h3>
                        <div id="privateKeyInputWrap">
                            <input type="password" id="privateKeyInput" value="ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff">
                            <button type="button" id="togglePrivateKey">Show</button>
                            <button>Confirm</button>
                        </div>
                        
                    </div>
                    <!--<div class="loadingSvgDiv"></div>-->
                </form>
            </div>
        </div>
        <div class="modalWrap hidden" id="validatorAddressModalWrap">
            <div class="modal">
                <form id="validatorAddressForm">
                    <div class="spacedText">
                        <h3>Validator Address:</h3>
                        <div id="validatorAddressInputWrap">
                            <input type="text" value="" placeholder="Won8nzmo1wrocFRErkWj">
                            <button>Confirm</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <div class="modalWrap hidden" id="minerAddressModalWrap">
            <div class="modal">
                <form id="minerAddressForm">
                    <div class="spacedText">
                        <h3>Miner Address:</h3>
                        <div id="minerAddressInputWrap">
                            <input type="text" value="" placeholder="Won8nzmo1wrocFRErkWj">
                            <button>Confirm</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <div class="modalWrap hidden" id="resetInfoModalWrap">
            <div class="modal">
                <form id="resetInfoForm">
                    <div class="spacedText">
                        <p id="confirmationMessage">Are you sure?</p>
                    </div>
                    <div class="spacedText">
                        <button type="button" id="confirmResetBtn">Confirm</button>
                        <button type="button" id="cancelResetBtn">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</body>